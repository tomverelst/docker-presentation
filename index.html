<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Docker Introduction</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/ordina.css" id="theme">
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!--Add support for earlier versions of Internet Explorer -->
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>

            <h3>Introduction to</h3>

            <img src="img/docker-transparent.png" width="400" class="transparent"/>

                <h5>
                    <p>by <span class="blue">Tom Verelst</span></p>

                    <p>Automation &amp; Tooling Competence Center</p>

                    <p>© 2016 <span class="orange">JWorks</span></p>

                    <img src="img/ordina-logo.png" class="transparent" style="width: 25%"/>
                </h5>
        </section>
        <section>

          <h3>Before we begin...</h3>
          <p>
            Join <a href="https://tlk.io/ordina-docker" target="_blank">https://tlk.io/ordina-docker</a>
          </p>
          <img src="img/docker-networking-turtles.png" class="transparent" width="350" />
        </section>
        <section>
            <h3>What is <span class="blue">Docker</span>?</h3>

            <img src="img/docker-transparent.png" width="400" class="transparent"/>

            <table>
                <td  style="text-align: center;" width="200" class="fragment">
                    <img src="img/build.png" class="transparent"/>
                    <p style="text-align: center;">Build</p>
                </td>
                <td  style="text-align: center;" width="200" class="fragment">
                    <img src="img/ship.png" class="transparent"/>
                    <p style="text-align: center;">Ship</p>
                </td>
                <td  style="text-align: center;" width="200" class="fragment">
                    <img src="img/run.png" class="transparent"/>
                    <p style="text-align: center;">Run</p>
                </td>
            </table>
        </section>
        <section>
            <section>
                <h3>What is a <span class="blue">container</span>?</h3>

                <img src="img/container_icon-300x300.png" class="transparent"/>

                <p class="fragment">Contains the complete <span class="blue">runtime environment</span></p>

                <p class="fragment"><span class="orange">Application</span></p>

                <p class="fragment"><span class="orange">Dependencies</span></p>
            </section>

            <section>
                <p>It <span style="font-style:italic">feels</span> like a</p>

                <h3><p class="blue">lightweight virtual machine</p></h3>

                <p class="fragment">It has a <span class="orange">shell</span> (SSH, ...)</p>

                <p class="fragment">Has its own <span class="orange">namespace</span></p>

                <p class="fragment">Has its own <span class="orange">network interface</span></p>

                <p class="fragment">Run stuff as <span class="red">root</span></p>

                <p class="fragment"><span class="orange">Services</span></p>

                <p class="fragment"><span class="orange">Packages</span></p>

                <p class="fragment">But if it's not a VM, so <span class="blue">what's the difference?</span></p>
            </section>
            <section>

                <h3><span class="blue">Virtual machines</span></h3>

                <div>
                    <div class="vm fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                        <div class="guestos block">Guest OS</div>
                    </div>
                    <div class="vm fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                        <div class="guestos block">Guest OS</div>
                    </div>
                    <div class="vm fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                        <div class="guestos block">Guest OS</div>
                    </div>
                </div>

                <div class="hypervisor block fragment" data-fragment-index="3">Hypervisor</div>
                <div class="kernel block fragment" data-fragment-index="2">Host OS / Kernel</div>
                <div class="infrastructure block fragment" data-fragment-index="1">Infrastructure</div>

            </section>

            <section>

                <h3><span class="blue">Containers</span></h3>

                <p class="fragment" data-fragment-index="6">
                    <span class="orange">Processes</span> that share the same <span class="red">kernel</span>
                </p>

                <div>
                    <div class="container fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                    </div>
                    <div class="container fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                    </div>
                    <div class="container fragment" data-fragment-index="4">
                        <div class="app block">App</div>
                        <div class="bins block">bins/libs</div>
                    </div>
                    <div class="container fragment" data-fragment-index="5">
                        <div class="daemon block">Daemon</div>
                    </div>
                </div>

                <div class="kernel block fragment" data-fragment-index="2">Kernel</div>
                <div class="infrastructure block fragment" data-fragment-index="1">Infrastructure</div>

            </section>
        </section>



        <section>
            <section>
                <h1><span class="blue">Docker</span> Architecture</h1>
            </section>

            <section>
                <h3><span class="blue">Basic Docker Workflow</span></h3>
                <img src="img/architecture.svg" class="transparent" />
            </section>

            <section>
                <h3><span class="blue">Docker Host</span></h3>
                <p>Docker Daemon</p>
                <p>Docker Remote API (REST)</p>
                <p>unix:///var/run/docker.sock</p>
                <p>https://dockerhost:2376</p>
                <p>Downloads and runs the containers</p>
            </section>

            <section>
                <h3><span class="blue">Docker Client</span></h3>
                <p>Talks to Docker daemon</p>
                <img src="img/engine.png" class="transparent" />
            </section>

            <section>
                <h3><span class="blue">Docker Registry</span></h3>
                <p>Image repository</p>
                <p>Official Docker Registry @ <a href="https://hub.docker.com/" target="_blank">hub.docker.com</a></p>
                <p>As a service @ <a href="https://hub.docker.com/enterprise/" target="_blank">Docker Trusted Registry</a></p>
                <p>Host your own @ <a href="https://github.com/docker/distribution" target="_blank">github.com/docker/distribution</a></p>
            </section>

            <section>
                <h3><span class="orange">Docker image</span></h3>
                <p>Basis for each container</p>
                <p>Layers</p>
            </section>

            <section>
                <h3><span class="orange">Layers</span></h3>
                <p class="fragment">Top layer is thrown away when container stops</p>
                <div class="block fragment writablecontainer" data-fragment-index="5">Writeable Container</div>
                <div class="block fragment image" data-fragment-index="4">Image: My application</div>
                <div class="block fragment image" data-fragment-index="3">Image: Java 8</div>
                <div class="block fragment baseimage" data-fragment-index="2">Base Image: Ubuntu</div>
                <div class="block fragment bootfs" data-fragment-index="1">bootfs (Kernel)</div>
            </section>

            <section>
              <h3><span class="blue">Content Addressable Image IDs</span></h3>
              <p class="fragment">Previously random UUIDs</p>
              <p class="fragment">Secure hash of image and layer data (SHA-256)</p>
              <p class="fragment">Separation of images and layers</p>
              <p class="fragment">ID collision prevention</p>
              <p class="fragment">Data integrity</p>
              <p class="fragment"><span class="red">Migration needed from pre-1.10</span></p>

            </section>

            <section>
                <h3><span class="orange">Volumes</span></h3>
                <p style="margin-top: 1.5em" class="fragment"><span class="blue">Write</span> and <span class="blue">read</span> data from outside</p>
                <p class="fragment">Mount <span class="red">local</span> folders onto the container</p>
                <p class="fragment">Docker Volume drivers available</p>
            </section>

        </section>

        <section>
            <section>
                <h1>Basic <span class="blue">Docker</span></h1>
                <img src="img/docker-whale.png" class="transparent" />
            </section>

            <section>
                <h3><span class="blue">Demo time!</span></h3>
            </section>
        </section>

        <section>
            <section>
                <h2 class="blue">Commands</h2>
            </section>
            <section>
                <h3><span class="pink">Dockerfile</span></h3>
                <p>Instructions to automate building of your image</p>
                <p>Steps are cached for fast-reuse</p>
                <pre>
                    <code>
                        FROM java:8

                        COPY target/application.jar app.jar

                        ENTRYPOINT ["java", "-jar", "app.jar"]
                    </code>
                </pre>
            </section>

            <section>
                <h3>Basic <span class="blue">Docker</span> commands</h3>
                <pre class="bigger fragment">
<span class="hljs-comment"># Build the image in the working directory</span>
$ docker build -t myapp .
                </pre>
                <pre class="bigger fragment">
<span class="hljs-comment"># Run the image we just built as a container</span>
$ docker run --name mycontainer myapp
                </pre>
                <pre class="bigger fragment">
<span class="hljs-comment"># Stop the container</span>
$ docker stop mycontainer
                </pre>
                <pre class="bigger fragment">
<span class="hljs-comment"># Start the container again</span>
$ docker start mycontainer
                </pre>

            </section>

            <section>
                <h3>Manage containers and images</h3>
                   <pre class="bigger fragment">
<span class="hljs-comment"># List running containers</span>
$ docker ps
                </pre>
                   <pre class="bigger fragment">
<span class="hljs-comment"># List all containers, including stopped</span>
$ docker ps -a
                </pre>

               <pre class="bigger fragment">
<span class="hljs-comment"># List all images</span>
$ docker images
                </pre>

                <pre class="bigger fragment">
<span class="hljs-comment"># Remove an image</span>
$ docker rmi myapp
                </pre>
            </section>

            <section>
                <h3>Push <span class="blue">Docker</span> images to the registry</h3>
   <pre class="bigger fragment">
<span class="hljs-comment"># Login to Docker Registry</span>
$ docker login --username=tomverelst --email=tom.verelst@ordina.be
                </pre>
                <pre class="bigger fragment">
<span class="hljs-comment"># Push the image to the Docker Registry</span>
$ docker push myapp
                </pre>
            </section>
        </section>

        <section>
            <section>
                <h3>How do <span class="blue">containers</span> really work?</h3>
            </section>

            <section>
                <h3>Back to <span class="orange">2007</span>, <span class="red">Kernel 2.6.24</span></h3>
                <div class="fragment" style="margin-top: 1.5em">
                    <p><span class="blue">Control Groups</span> aka cgroups</p>
                    <p>Kernel feature</p>
                </div>
                <div class="fragment" style="margin-top: 1.5em">
                    <p><span class="blue">Linux Containers</span> aka lxc</p>
                    <p>Linux package that uses cgroups</p>
                </div>
            </section>

            <section>
                <h3><span class="blue">Control group</span></h3>
                <p>Resource limiting</p>
                <p>Prioritization</p>
                <p>Accounting</p>
                <p>Controlling</p>
            </section>

            <section>
                <h3><span class="blue">Linux Containers</span></h3>
                <p>Package</p>
                <p>Different on different Linux distro's</span>
            </section>

            <section>
                <h3><span class="blue">Redesign in 2013</span></h3>
                <h3>Kernel 3.15 and 3.16</h3>
                <div class="fragment">
                    <h3><span class="orange">Namespace isolation</span></h3>
                    <p>PID namespace</p>
                    <p>Network namespace</p>
                    <p>Hostname</p>
                    <p>Mount namespace</p>
                    <p>Inter-process communication namespace</p>
                    <p>User namespace</p>
                </div>
            </section>

            <section>
                <h3>First <span class="blue">Docker</span> release in <span class="orange">2013</span></h3>
                <p>Depended on LXC</p>
                <p>Now abstracted with <span class="blue">libcontainer</span></p>
            </section>
        </section>

        <section>
            <section>
                <h2><span class="blue">Benefits of containerisation</span></h2>
            </section>
            <section>
              <h3><span class="blue">Scaling</span></h3>
            </section>
            <section>
              <h3><span class="blue">Immutable Infrastructure</span></h3>
              <img src="img/docker-lego.jpg" class="transparent" />
            </section>
            <section>
              <h2><span class="blue">DevOps</span></h2>
              <div class="fragment" style="display: inline-block; width: 45%;">
                <h3 style="margin-top: 1.5em;"><span class="orange">Dev</span></h3>
                <p>Application and dependencies</p>
                <p>Inside of the container</p>
              </div>
              <div class="fragment" style="display: inline-block; width: 45%;">
                <h3 style="margin-top: 1.5em;"><span class="orange">Ops</span></h3>
                <p>Infrastructure</p>
                <p>Outside of the container</p>
              </div>
            </section>
            <section>
              <h3><span class="blue">Continuous Integration</span></h3>
              <p class="fragment">Same artifact for all environments</p>
              <p class="fragment">No more "It worked on my laptop"</p>
              <p class="fragment">Run your builds and tests inside containers</p>
            </section>
        </section>

        <section>
            <h1><span class="blue">Orchestration</span></h1>

            <table>
              <tr>
                <td class="fragment" data-fragment-index="1"><img src="img/docker-compose.png" class="transparent" /></td>
                <td class="fragment" data-fragment-index="2"><img src="img/docker-machine.png" class="transparent" /></td>
                <td class="fragment" data-fragment-index="3"><img src="img/docker-swarm.png" class="transparent" width="400" /></td>
                <td class="fragment" data-fragment-index="4"><img src="img/docker-networking-turtles.png" width="400" class="transparent" /></td>
              </tr>
              <tr>
                <td class="fragment center" data-fragment-index="1"><span class="orange">Compose</span></td>
                <td class="fragment center" data-fragment-index="2"><span class="orange">Machine</span></td>
                <td class="fragment center" data-fragment-index="3"><span class="orange">Swarm</span></td>
                <td class="fragment center" data-fragment-index="4"><span class="orange">Networking</span></td>
              </tr>
            </table>
        </section>

        <section>
          <section>
              <h2><span class="blue">Compose</span></h2>
              <img src="img/docker-compose.png" class="transparent" />
              <p><span class="orange">Define and run multi-container applications</span></p>
              <p><span class="orange">Single host</span></p>
              <p><span class="red">Multi-host experimental</span></p>
          </section>
        </section>

        <section>
            <section>
                <h2><span class="blue">Machine</span></h2>
                <img src="img/docker-machine.png" class="transparent" />
                <p><span class="orange">Create and provision machines as Docker hosts</span></p>
            </section>
            <section>
              <div style="display: inline;">
                <img src="img/docker-machine.png" class="transparent" />
              </div>
              <div style="display:inline; position: relative;">
                <img src="img/baby-dockers.png" class="transparent fragment" data-fragment-index="1" />
                <img src="img/container.gif" class="transparent fragment" data-fragment-index="2"
                  width="100" style="position: absolute; top: -180px; left: 80px;" />
                <img src="img/container.gif" class="transparent fragment" data-fragment-index="3"
                  width="100" style="position: absolute; top: -160px; left: 150px;" />
                <img src="img/container.gif" class="transparent fragment" data-fragment-index="4"
                 width="100" style="position: absolute; top: -260px; left: 200px;" />
              </div>
              <p class="fragment" data-fragment-index="1"><span class="orange">Create new Docker hosts</span></p>
              <p class="fragment" data-fragment-index="2"><span class="orange">Run containers on these new hosts</span></p>
            </section>
            <section>
              <h2><span class="blue">Drivers</span></h2>

              <div>
                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/aws.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/azure.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/gce.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/vmware.png" class="transparent" />
                </div>
              </div>

              <div>
                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/digital-ocean.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/openstack.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/rackspace.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/virtualbox.png" class="transparent" />
                </div>
              </div>

              <div>
                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/hyperv.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/exoscale.png" class="transparent" />
                </div>

                <div style="vertical-align: middle; display: inline-block;">
                  <img width="150" src="img/ibmsoftlayer.png" class="transparent" />
                </div>
              </div>
            </section>
        </section>

        <section>
            <section>
                <h2><span class="blue">Swarm</span></h2>
                <img src="img/docker-swarm.png" class="transparent" width="250" />
                <p><span class="orange">Clustering tool</span></p>
                <p><span class="orange">Turn multiple hosts into one virtual host</span></p>
                <p><span class="orange">Service discovery</span></p>
                <p><span class="orange">Scheduling</span></p>
            </section>
            <section>
              <img src="img/docker-swarm-manager.png" class="transparent" />
            </section>
            <section>
              <h3><span class="orange">Labels</span></h3>
              <p>Define custom labels to your <span class="blue">Docker</span> host</p>
              <pre class="fragment">
                  <code class="bash">$ docker daemon --label env="production" --label storage="ssd"</code>
              </pre>

              <pre class="fragment">
                  <code class="bash">$ docker-machine --engine-label env="production" --label storage="ssd"</code>
              </pre>

              <pre class="fragment">
                  <code class="bash">$ docker run -e constraint:env==production -e constraint:storage==ssd ...</code>
              </pre>
            </section>
            <section>
              <h2><span class="blue">Filters</span></h2>
              <div class="fragment" style="display: inline-block; width: 45%;">
                <h3 style="margin-top: 1.5em;"><span class="orange">Node</span></h3>
                <p>Constraint</p>
                <p>Health</p>
                <p>&nbsp;</p>
              </div>
              <div class="fragment" style="display: inline-block; width: 45%;">
                <h3 style="margin-top: 1.5em;"><span class="orange">Container</span></h3>
                <p>Affinity</p>
                <p>Port</p>
                <p>Dependency</p>
              </div>
            </section>
        </section>

        <section>
          <section>
              <h2><span class="blue">Networking</span></h2>
              <img src="img/docker-networking-turtles.png" class="transparent" width="250" />
              <p><span class="orange">Create overlay networks</span></p>
              <p><span class="orange">Replaces links (bridge)</span></p>
              <p><span class="orange">Network plugins (Weave)</span></p>
              <p><span class="orange">Embedded DNS server</span></p>
          </section>
        </section>

        <section>
          <section>
            <img src="img/docker-cloud.png" class="transparent" />
            <p><a href="https://cloud.docker.com/" target="_blank">https://cloud.docker.com/</a></p>
            <p>(Tutum: <a href="https://www.tutum.co/" target="_blank">https://www.tutum.co/</a>)</p>
          </section>
        </section>

        <section>
          <h1><span class="blue">Tools</span></h1>
          <img src="img/tools.png" class="transparent" />
        </section>

        <section>
          <section>
            <h1><span class="blue">Kubernetes</span></h1>
           <img src="img/kubernetes.png" class="transparent" width="500" />
          </section>
          <section>
            <img src="img/kubernetes-overview.png" class="transparent" />
          </section>
        </section>

        <section>
          <section>
           <img src="img/coreos.png" class="transparent" width="500" />
          </section>
          <section>
            <img src="img/coreos-architecture.svg" class="transparent" />
          </section>
        </section>

        <section>
          <section>
            <h1><span class="blue">Lattice</span></h1>
           <img src="img/lattice.png" class="transparent" width="500" />
          </section>
        </section>

        <section>
          <section>
            <h1><span class="blue">Flocker</span></h1>
            <img src="img/flocker.svg" class="transparent" width="500" />
            <p>Data Volume Manager</p>
          </section>
        </section>

        <section>
            <section>
                <img src="img/docker-security.png" class="transparent" width="500" />
            </section>
            <section>
                <h3><span class="blue">Container Security</span></h3>
                <p class="fragment">Isolation</p>
                <p class="fragment">Dependencies</p>
                <p class="fragment">Seccomp profiles</p>
                <p class="fragment">Coming soon: Unikernels</p>
                <p class="fragment"><span class="red">Security patches</span></p>
            </section>
            <section>
              <h3><span class="blue">Node Security</span></h3>
              <p class="fragment">Daemon must run as <span class="red">root</span></p>
              <p class="fragment">Default authorization is all or nothing</p>
              <p class="fragment">Authorization plugins</p>
            </section>
        </section>

        <section>
          <section>
            <h1>Roadmap</h1>
            <img src="img/roadmap.png" class="transparent" />
          </section>
        </section>

        <section>
          <section>
          <h1>Thank You!</h1>
          <img src="img/docker-friends2.png" class="transparent" width="200"/>
          <div>
                <h5>
                    <p>Automation &amp; Tooling Competence Center</p>

                    <p>© 2016 <span class="orange">JWorks</span></p>

                    <img src="img/ordina-logo.png" class="transparent" style="width: 20%"/>
                </h5>

        </section>

    </div>
</div>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>
<script>
    Reveal.initialize({
        transition: 'convex',
        dependencies: [
            {
                src: 'plugin/markdown/marked.js',
                condition: function () {
                    return !!document.querySelector('[data-markdown]');
                }
            },
            {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            },
            {
                src: 'plugin/notes/notes.js',
                async: true
            }
        ]
    });
</script>
</body>
</html>
